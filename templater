#!/usr/bin/env ruby
require 'json'

if(ARGV.length != 3)
  raise ArgumentError, "Provide exactly 3 arguments."
end
if(File.exist?(ARGV[2]))
  raise IOError, "Could not create output file. File \"#{ARGV[2]}\" already exists."
end

template_file = File.open(ARGV[0], "r")
data_file = File.open(ARGV[1], "r")
output_file = File.open(ARGV[2], "w") 

template_file.each_line do |input_line|
  output_file.write("From #{ARGV[0]} :: ")
  output_file.write(input_line)
end

data_object = JSON.parse(data_file.read)
output_file.write("Internal JSON object:\n")
output_file.write(data_object.inspect)

template_file.close
output_file.close
