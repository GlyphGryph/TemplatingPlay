#!/usr/bin/env ruby

if(ARGV.length != 3)
  raise ArgumentError, "Provide exactly 3 arguments."
end
if(File.exist?(ARGV[2]))
  raise IOError, "Could not create output file. File \"#{ARGV[2]}\" already exists."
end

template_file = File.open(ARGV[0], "r")
data_file = File.open(ARGV[1], "r")
output_file = File.open(ARGV[2], "w") 

[template_file, data_file].each_with_index do |file, index|
  file.each_line do |input_line|
    output_file.write("From #{ARGV[index]} :: ")
    output_file.write(input_line)
  end
end

template_file.close
output_file.close
